From 69dfe52003382aa99919d52faf5e28bbc43236ed Mon Sep 17 00:00:00 2001
From: John Clark <inindev@gmail.com>
Date: Sun, 4 Jun 2023 10:32:37 -0400
Subject: [PATCH 1/4] partially revert commit 3891c68: convert to standard boot

Signed-off-by: John Clark <inindev@gmail.com>
---
 include/configs/rk3399_common.h   | 3 +++
 include/configs/rockchip-common.h | 2 +-
 2 files changed, 4 insertions(+), 1 deletion(-)

diff --git a/include/configs/rk3399_common.h b/include/configs/rk3399_common.h
index 96ba19c659..366459d544 100644
--- a/include/configs/rk3399_common.h
+++ b/include/configs/rk3399_common.h
@@ -47,11 +47,14 @@
 #define ROCKCHIP_DEVICE_SETTINGS
 #endif
 
+#include <config_distro_bootcmd.h>
+#include <environment/distro/sf.h>
 #define CFG_EXTRA_ENV_SETTINGS \
 	ENV_MEM_LAYOUT_SETTINGS \
 	"fdtfile=" CONFIG_DEFAULT_FDT_FILE "\0" \
 	"partitions=" PARTS_DEFAULT \
 	ROCKCHIP_DEVICE_SETTINGS \
+	BOOTENV \
 	"boot_targets=" BOOT_TARGETS "\0"
 
 #endif
diff --git a/include/configs/rockchip-common.h b/include/configs/rockchip-common.h
index 18544d75ac..b78be5c237 100644
--- a/include/configs/rockchip-common.h
+++ b/include/configs/rockchip-common.h
@@ -67,7 +67,7 @@
 	BOOT_TARGET_PXE(func) \
 	BOOT_TARGET_DHCP(func) \
 	BOOT_TARGET_SF(func)
-#define BOOT_TARGETS	"mmc1 mmc0 nvme scsi usb pxe dhcp spi"
+#define BOOT_TARGETS	"mmc1 mmc0 nvme0 usb0 pxe dhcp"
 #else
 #define BOOT_TARGET_DEVICES(func) \
 	BOOT_TARGET_MMC(func) \
-- 
2.39.2

