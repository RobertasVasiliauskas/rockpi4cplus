From 074ea14b6207b56a94ffeca1a519f7f4802ec1bd Mon Sep 17 00:00:00 2001
From: John Clark <inindev@gmail.com>
Date: Wed, 5 Apr 2023 07:37:43 -0400
Subject: [PATCH 1/4] revert rockchip: Convert rockpro64-rk3399 to use standard
 boot

---
 include/configs/rk3399_common.h   | 5 ++++-
 include/configs/rockchip-common.h | 2 --
 2 files changed, 4 insertions(+), 3 deletions(-)

diff --git a/include/configs/rk3399_common.h b/include/configs/rk3399_common.h
index 96ba19c659..0c6afc5d39 100644
--- a/include/configs/rk3399_common.h
+++ b/include/configs/rk3399_common.h
@@ -47,12 +47,15 @@
 #define ROCKCHIP_DEVICE_SETTINGS
 #endif
 
+#include <config_distro_bootcmd.h>
+#include <environment/distro/sf.h>
 #define CFG_EXTRA_ENV_SETTINGS \
 	ENV_MEM_LAYOUT_SETTINGS \
 	"fdtfile=" CONFIG_DEFAULT_FDT_FILE "\0" \
 	"partitions=" PARTS_DEFAULT \
 	ROCKCHIP_DEVICE_SETTINGS \
-	"boot_targets=" BOOT_TARGETS "\0"
+	BOOTENV \
+	BOOTENV_SF "\0"
 
 #endif
 
diff --git a/include/configs/rockchip-common.h b/include/configs/rockchip-common.h
index 18544d75ac..d789b4f557 100644
--- a/include/configs/rockchip-common.h
+++ b/include/configs/rockchip-common.h
@@ -67,14 +67,12 @@
 	BOOT_TARGET_PXE(func) \
 	BOOT_TARGET_DHCP(func) \
 	BOOT_TARGET_SF(func)
-#define BOOT_TARGETS	"mmc1 mmc0 nvme scsi usb pxe dhcp spi"
 #else
 #define BOOT_TARGET_DEVICES(func) \
 	BOOT_TARGET_MMC(func) \
 	BOOT_TARGET_USB(func) \
 	BOOT_TARGET_PXE(func) \
 	BOOT_TARGET_DHCP(func)
-#define BOOT_TARGETS	"mmc1 mmc0 usb pxe dhcp"
 #endif
 
 #ifdef CONFIG_ARM64
-- 
2.39.2

